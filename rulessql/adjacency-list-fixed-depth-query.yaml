rules:
  - id: adjacency-list-fixed-depth-query
    patterns:
      - pattern: |
          SELECT c1.*, c2.*, c3.*, c4.*
          FROM Comments c1
          LEFT JOIN Comments c2 ON c2.parent_id = c1.comment_id
          LEFT JOIN Comments c3 ON c3.parent_id = c2.comment_id
          LEFT JOIN Comments c4 ON c4.parent_id = c3.comment_id
    message: "Антипаттерн 'Иерархические данные': запрос с фиксированной глубиной для дерева. Не масштабируется для глубоких иерархий."
    languages: [sql]
    severity: WARNING